<div class="main">
    <div class="container">
        <div class="color-whell-block">
            <canvas #canvas width="500" height="500"></canvas>
            <color-circle  *ngFor="let rgbColor of rgbColors; let i = index" [rgbColors]="rgbColors" [i] = "i" [colorSchema] = "modelType"></color-circle>        
        </div>
        <div class="color-line">
            <div class="card" *ngFor="let rgbColor of rgbColors; let i = index">
                <div class="color" [ngStyle]="getCardStyle(rgbColor)">
                    <a [ngStyle]="getTextColor(rgbColor)"> #{{getHEX(rgbColor)}}</a>
                </div>            
    
                <div class="sliders">
                    <div class="slider-block">
                        <a>R</a><input type="range" min="0" max="255" class="slider" [(ngModel)] = "rgbColors[i].red">
                    </div>
                    <div class="slider-block">
                        <a>G</a><input type="range" min="0" max="255" class="slider" [(ngModel)] = "rgbColors[i].green">
                    </div>
                    <div class="slider-block">
                        <a>B</a><input type="range" min="0" max="255" class="slider" [(ngModel)] = "rgbColors[i].blue">
                    </div>
                </div>                
            </div>
        </div>       
    </div>

    <div class="button-line">
        <select [(ngModel)] ="modelType" (change)="onModelChange()">
            <option *ngFor="let schema of colorSchemes" [value]="schema">{{schema}} </option>
        </select>
        <button (click) = "updateColors()">Применить</button>
        <button (click) = "openSave()" >Сохранить</button>
    </div>    
    
</div>

<div class="back" *ngIf = "isSave">
    <div class="save-block">
        <button class="button-back" (click)="closeSave()">Назад</button>
        <div class="save-color-line">
            <div class="block" *ngFor="let color of palette.colorInPalettes">
                <div class="color" [ngStyle]="{'background-color': '#' + color.hex}"></div>
                <a class="hex">#{{color.hex}}</a>
                <input type="text" class="colorRole" [(ngModel)]="color.colorRole" placeholder="роль цвета">
            </div>
        </div>
        <div class="sides">
            <div class="left-side">
                <input type="text" class="paletteName" [(ngModel)]="palette.name" placeholder="Имя палитры">
                 <div class="tags">
                    <div class="tag">
                        <a>Теги</a>
                        <div 
                            class="tag-list" 
                            cdkDropList
                            #markList="cdkDropList"
                            [cdkDropListData]="palette.tags"
                            [cdkDropListConnectedTo]="[unmarkList]"
                            (cdkDropListDropped)="drop($event)">
                            <div class="tag-item" *ngFor="let tag of palette.tags" cdkDrag> {{tag.name}}</div>
                        </div>
                    </div>
                    <div class="tag">
                        <a>Доступные теги</a>
                        <div 
                            class="tag-list" 
                            cdkDropList 
                            #unmarkList="cdkDropList"
                            [cdkDropListData]="availableTags" 
                            [cdkDropListConnectedTo]="[markList]"
                            (cdkDropListDropped)="drop($event)">
                            <div class="tag-item" *ngFor="let tag of availableTags" cdkDrag> {{tag.name}}</div>
                        </div>
                    </div>
                </div>
            </div> 
            <div class="right-side">
                <div class="switch-block">
                    <a>Приватная</a>
                    <label class="switch">
                        <input type="checkbox" [(ngModel)]="palette.private">
                        <span class="sliderr round"></span>
                      </label>
                </div>
                <button (click)="save()">Сохранить</button>
            </div>
        </div>        
    </div>
</div>

